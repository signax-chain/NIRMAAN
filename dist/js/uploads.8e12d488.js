(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["uploads"],{"0aa5":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-breadcrumbs",{attrs:{items:t.crumbs}}),n("h3",{staticClass:"heading"},[t._v("Resources")]),n("div",{staticClass:"wrapper mx-5"},[n("h3",{staticClass:"heading ml-0"},[t._v("All Resources")]),n("documentation-templates")],1)],1)},r=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["incubator"===t.currentUser.role?n("v-btn",{staticClass:"white--text d-block ml-auto mb-5",attrs:{color:"traktor"},on:{click:function(e){t.dialog=!0}}},[t._v("Add new resouce "),n("v-icon",[t._v("mdi-plus-circle")])],1):t._e(),n("v-data-table",{attrs:{headers:t.headers,items:t.templates,"mobile-breakpoint":"0"},scopedSlots:t._u([{key:"item.document",fn:function(e){var a=e.item;return[n("a",{attrs:{href:a.document}},[t._v("download")])]}},"incubator"===t.currentUser.role?{key:"item.actions",fn:function(e){var a=e.item;return[n("div",{staticClass:"d-flex"},[n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.edit(a)}}},[n("v-icon",[t._v("mdi-pencil")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t._delete(a.docId)}}},[n("v-icon",[t._v("mdi-delete")])],1)],1)]}}:null],null,!0)}),n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{persistent:"","max-width":"800"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v(" "+t._s(t.cardTitle)+" "),n("v-spacer"),n("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.cancel()}}},[t._v(" Cancel ")]),t.isEdit?n("v-btn",{staticClass:"white--text",attrs:{color:"traktor"},on:{click:function(e){return t.update()}}},[t._v(" Update ")]):n("v-btn",{staticClass:"white--text",attrs:{color:"traktor"},on:{click:function(e){return t.addNew()}}},[t._v(" Add ")])],1),n("v-card-text",{staticClass:"mt-3"},[n("v-text-field",{attrs:{label:"Template title",outlined:"",dense:""},model:{value:t.template.title,callback:function(e){t.$set(t.template,"title",e)},expression:"template.title"}}),n("v-file-input",{attrs:{label:t.isEdit?"Change document":"Choose file",outlined:"",dense:"",multiple:""},model:{value:t.document,callback:function(e){t.document=e},expression:"document"}})],1)],1)],1)],1)],1)},c=[],i=(n("4160"),n("159b"),n("53ca")),s=(n("96cf"),n("1da1")),u=n("5530"),l=n("c7ca"),d=n("3d20"),m=n.n(d),p=n("f722"),f=n("2f62"),b={name:"DocumentationTemplates",computed:Object(u["a"])({cardTitle:function(){return this.isEdit?"Edit template":"Add new template"}},Object(f["b"])({currentUser:function(t){return t.user.currentUser}})),data:function(){return{dialog:!1,isEdit:!1,document:null,template:{title:null,document:null},templates:[],headers:[{text:"Title",align:"center",sortable:!0,value:"title"},{text:"Template",align:"start",sortable:!0,value:"document"},{text:"Actions",align:"start",sortable:!1,value:"actions"}]}},created:function(){this.getTemplates()},methods:{getTemplates:function(){var t=this;p["S"].doc(this.$store.state.incubator.currentIncubator.docId).collection("documentationTemplates").onSnapshot((function(e){t.templates=[],e.forEach(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=n.data(),a.docId=n.id,t.templates.push(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},addNew:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==t.document&&null!==t.template.title){e.next=3;break}return t.$toast.error("All fileds are required",{position:"top"}),e.abrupt("return");case 3:return e.next=5,Object(l["a"])(t.document,"Uploads");case 5:t.template.document=e.sent;try{p["S"].doc(t.$store.state.incubator.currentIncubator.docId).collection("documentationTemplates").add(t.template),t.$toast.success("Added",{position:"top"}),t.dialog=!1}catch(n){t.$toast.error(n,{position:"top"})}case 7:case"end":return e.stop()}}),e)})))()},edit:function(t){this.template=t,this.isEdit=!0,this.dialog=!0},cancel:function(){this.dialog=!1,this.isEdit=!1,this.document=null},update:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===t.document||"object"!==Object(i["a"])(t.document)){e.next=7;break}return e.next=3,Object(l["a"])(t.document,"Website");case 3:t.template.document=e.sent,t.updateData(),e.next=8;break;case 7:t.updateData();case 8:case"end":return e.stop()}}),e)})))()},updateData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{p["S"].doc(t.$store.state.incubator.currentIncubator.docId).collection("documentationTemplates").doc(t.template.docId).set(t.template,{merge:!0}),t.$toast.success("Updated",{position:"top"}),t.dialog=!1,t.isEdit=!1,t.document=null}catch(n){t.$toast.error(n,{position:"top"})}case 1:case"end":return e.stop()}}),e)})))()},_delete:function(t){var e=this;m.a.fire({title:"Are you sure?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",cancelButtonText:"No"}).then(function(){var n=Object(s["a"])(regeneratorRuntime.mark((function n(a){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a.isConfirmed)try{p["S"].doc(e.$store.state.incubator.currentIncubator.docId).collection("documentationTemplates").doc(t).delete(),e.$toast.success("Deleted",{position:"top"})}catch(r){e.$toast.error(r,{position:"top"})}case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}}},v=b,h=(n("b6f7"),n("2877")),w=n("6544"),x=n.n(w),g=n("8336"),k=n("b0af"),C=n("99d9"),_=n("8fea"),T=n("169a"),R=n("23a7"),j=n("132d"),$=n("0fd9"),I=n("2fa4"),V=n("8654"),O=Object(h["a"])(v,o,c,!1,null,"2528d5e5",null),E=O.exports;x()(O,{VBtn:g["a"],VCard:k["a"],VCardText:C["b"],VCardTitle:C["c"],VDataTable:_["a"],VDialog:T["a"],VFileInput:R["a"],VIcon:j["a"],VRow:$["a"],VSpacer:I["a"],VTextField:V["a"]});var y={name:"Uploads",components:{DocumentationTemplates:E},data:function(){return{crumbs:[{text:"Dashboard",disabled:!0},{text:"Resources",disabled:!0},{text:"All Resources",disabled:!0}]}}},A=y,D=(n("0e7c"),n("2bc5")),U=n("a523"),B=Object(h["a"])(A,a,r,!1,null,"961a86ce",null);e["default"]=B.exports;x()(B,{VBreadcrumbs:D["a"],VContainer:U["a"]})},"0e7c":function(t,e,n){"use strict";n("4af3")},"4aa7":function(t,e,n){},"4af3":function(t,e,n){},b6f7:function(t,e,n){"use strict";n("4aa7")}}]);
//# sourceMappingURL=uploads.8e12d488.js.map