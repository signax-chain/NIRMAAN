(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"2bd7":function(e,t,r){},"393f":function(e,t,r){},"3ae5":function(e,t,r){},4447:function(e,t,r){"use strict";r("2bd7")},b6b1:function(e,t,r){"use strict";r("393f")},d60c:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"container"},[n("v-row",{staticClass:"login__row"},[e.isMobileScreen()?n("v-col",{attrs:{cols:"12",md:"6"}},[n("img",{staticClass:"product__img",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/ims-traktor.appspot.com/o/Product%2FTraktor.png?alt=media&token=5c9466f1-7a6d-4e55-a451-4c5a8b60e139",alt:""}})]):e._e(),n("v-col",{attrs:{cols:"12",md:"6"}},[n("login-comp")],1),e.isMobileScreen()?e._e():n("v-col",{staticClass:"branding__section",attrs:{cols:"12",md:"6"}},[n("img",{staticClass:"product__img",staticStyle:{width:"220px"},attrs:{src:r("58e9"),alt:""}}),"/"===e.$route.path?n("h2",{staticClass:"text-center mt-2",staticStyle:{color:"#3aa959"}},[e._v(" Nirmaan IITM ")]):e._e(),"/"===e.$route.path?n("h3",{staticClass:"text-center"},[e._v("Startup Management Portal")]):e._e(),n("br"),n("img",{staticClass:"branding__img",attrs:{src:r("cad8"),alt:""}})]),e.isMobileScreen()?n("v-col",{attrs:{cols:"12"}},[n("img",{staticClass:"branding__img",attrs:{src:r("cad8"),alt:""}})]):e._e()],1)],1)},a=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login__container"},["/"===e.$route.path?n("img",{staticClass:"mb-8 product-img",staticStyle:{width:"250px"},attrs:{src:r("a319"),alt:""}}):e._e(),n("h2",{staticClass:"mb-3"},[e._v("Login")]),n("v-row",{staticClass:"mt-5"},[n("v-col",{attrs:{cols:"12",md:"8"}},[n("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.validateLogin()}}},[n("v-text-field",{attrs:{label:"Email address","prepend-inner-icon":"mdi-email",type:"email",rules:[e.rules.required],solo:""},model:{value:e.credentials.email,callback:function(t){e.$set(e.credentials,"email",t)},expression:"credentials.email"}}),n("v-text-field",{attrs:{label:"Password","prepend-inner-icon":"mdi-lock",rules:[e.rules.required],type:e.show?"text":"password","append-icon":e.show?"mdi-eye":"mdi-eye-off",solo:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.credentials.password,callback:function(t){e.$set(e.credentials,"password",t)},expression:"credentials.password"}}),e.isLoggingIn?n("v-btn",{attrs:{color:"trakor",disabled:""}},[e._v(" Logging in... "),n("v-progress-circular",{attrs:{indeterminate:"",color:"green"}})],1):n("v-btn",{staticClass:"white--text",attrs:{color:"traktor",type:"submit",large:""}},[e._v("Login")]),n("a",{staticClass:"d-block mt-2 forgot",attrs:{href:"#"},on:{click:function(t){e.dialog=!0}}},[n("b",[e._v("Forgot Password?")])])],1)],1)],1),n("reset-password",{attrs:{visible:e.dialog},on:{close:function(t){e.dialog=!1}}})],1)},o=[],i=(r("b0c0"),r("96cf"),r("1da1")),c=(r("d3b7"),r("f722")),u=r("4360"),l=function(e){return new Promise((function(t){setTimeout(Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["y"].doc(e.userId).get();case 3:return n=r.sent,a=n.data(),a.role=e.role,r.next=8,u["a"].dispatch("SHOW_CURRENT_USER",a);case 8:t(a),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),t(r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,11]])}))),500)}))},d=function(e){return new Promise((function(t){setTimeout(Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["D"].doc(e.userId).get();case 3:n=r.sent,a=n.data(),a.role=e.role,u["a"].dispatch("SHOW_CURRENT_USER",a),t(a),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),t(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])}))),500)}))},m=function(e){return new Promise((function(t){setTimeout(Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["Q"].doc(e.userId).get();case 3:n=r.sent,a=n.data(),a.role=e.role,u["a"].dispatch("SHOW_CURRENT_USER",a),t(a),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),t(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])}))),500)}))},p=function(e){return new Promise((function(t){setTimeout(Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["A"].doc(e.userId).get();case 3:n=r.sent,a=n.data(),a.role=e.role,u["a"].dispatch("SHOW_CURRENT_USER",a),t(a),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),t(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])}))),500)}))},f=function(e){return new Promise((function(t){setTimeout(Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["y"].doc(e).get();case 3:n=r.sent,u["a"].dispatch("SET_INCUBATOR",n.data()),t(n.data()),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),t(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])}))),500)}))},b=r("c325"),g=(r("7db0"),r("b64b"),function(e){return new Promise((function(t){setTimeout(Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["b"].signInWithEmailAndPassword(e.email,e.password).then((function(e){c["b"].currentUser.getIdTokenResult().then(function(){var r=Object(i["a"])(regeneratorRuntime.mark((function r(n){var a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,c["T"].doc(e.user.uid).get();case 2:a=r.sent,s=a.data(),o=n.claims.roles,s.role=Object.keys(o).find((function(e){return!0===o[e]})),t(s);case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())})).catch((function(e){t(e)}));case 3:r.next=8;break;case 5:r.prev=5,r.t0=r["catch"](0),t(r.t0);case 8:case"end":return r.stop()}}),r,null,[[0,5]])}))),1e3)}))}),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("v-form",{ref:"form"},[r("v-card",[r("v-card-title",[e._v(" Reset Password ")]),r("v-card-text",{staticClass:"mt-3"},[r("v-text-field",{attrs:{outlined:"",label:"Enter your email Address",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{staticClass:"white--text",attrs:{color:"traktor"},on:{click:function(t){return e.reset()}}},[e._v("Reset My Password")]),r("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){e.show=!1}}},[e._v("Cancel")])],1)],1)],1)],1)],1)},v=[],w={name:"ResetPassword",props:["visible"],computed:{show:{get:function(){return this.visible},set:function(e){e||this.$emit("close")}}},data:function(){return{email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}]}},methods:{reset:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=12;break}return t.prev=1,t.next=4,c["b"].sendPasswordResetEmail(e.email);case 4:e.$toast.success("Reset Password email sent to ".concat(e.email),{position:"top"}),e.email="",e.$emit("close"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$toast.error(t.t0,{position:"top"});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()}}},x=w,R=(r("b6b1"),r("2877")),_=r("6544"),k=r.n(_),C=r("8336"),O=r("b0af"),S=r("99d9"),I=r("a523"),E=r("169a"),$=r("4bd4"),T=r("2fa4"),L=r("8654"),V=Object(R["a"])(x,h,v,!1,null,"83d21f22",null),P=V.exports;k()(V,{VBtn:C["a"],VCard:O["a"],VCardActions:S["a"],VCardText:S["b"],VCardTitle:S["c"],VContainer:I["a"],VDialog:E["a"],VForm:$["a"],VSpacer:T["a"],VTextField:L["a"]});var j={components:{ResetPassword:P},name:"LoginComp",data:function(){return{credentials:{email:null,password:null},show:!1,rules:{required:function(e){return!!e||"Required"}},dialog:!1,isLoggingIn:!1}},methods:{validateLogin:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=49;break}return e.isLoggingIn=!0,t.next=4,g(e.credentials);case 4:if(r=t.sent,console.log(r),null===r.code||void 0===r.code){t.next=12;break}return e.$store.dispatch("SHOW_SNACKBAR",{showing:!0,text:"Invalid password!",color:"error"}),e.isLoggingIn=!1,t.abrupt("return");case 12:if(e.isLoggingIn=!1,e.$store.dispatch("SHOW_LOADER",{isShowing:!0}),"incubator"!==r.role){t.next=20;break}return t.next=17,l(r);case 17:return t.next=19,f(r.userId);case 19:Object(b["b"])();case 20:if("mentor"!==r.role){t.next=29;break}return t.next=23,d(r);case 23:return t.next=25,f(r.incubatorId);case 25:return Object(b["d"])(),n={incubatorId:r.incubatorId,photoURL:r.photoURL,statement:"Mentor ".concat(r.name," has logged in."),createdAt:new Date,type:"mentor",notification:!1,mentorId:r.userId},t.next=29,c["a"].add(n);case 29:if("startup"!==r.role){t.next=38;break}return t.next=32,m(r);case 32:return t.next=34,f(r.incubatorId);case 34:return Object(b["e"])(),a={incubatorId:r.incubatorId,photoURL:r.photoURL,statement:"Startup ".concat(r.name," has logged in."),createdAt:new Date,type:"startup",notification:!1,startupId:r.userId},t.next=38,c["a"].add(a);case 38:if("member"!==r.role){t.next=44;break}return t.next=41,p(r);case 41:return t.next=43,f(r.incubatorId);case 43:Object(b["c"])();case 44:localStorage.setItem("loginRoute",e.$route.path),e.$router.push("/dashboard"),e.$store.dispatch("SHOW_LOADER",{isShowing:!1});case 47:t.next=51;break;case 49:e.$store.dispatch("SHOW_SNACKBAR",{showing:!0,text:"please fill all the fields",color:"error"}),e.$store.dispatch("SHOW_LOADER",{isShowing:!1});case 51:case"end":return t.stop()}}),t)})))()}}},y=j,A=(r("4447"),r("62ad")),U=r("490a"),W=r("0fd9"),H=Object(R["a"])(y,s,o,!1,null,"2cb0d6a6",null),D=H.exports;k()(H,{VBtn:C["a"],VCol:A["a"],VForm:$["a"],VProgressCircular:U["a"],VRow:W["a"],VTextField:L["a"]});var M={components:{LoginComp:D},methods:{isMobileScreen:function(){return screen.width<=600}}},N=M,F=(r("ec0f"),Object(R["a"])(N,n,a,!1,null,"2fed8526",null));t["default"]=F.exports;k()(F,{VCol:A["a"],VContainer:I["a"],VRow:W["a"]})},ec0f:function(e,t,r){"use strict";r("3ae5")}}]);
//# sourceMappingURL=login.f590d836.js.map